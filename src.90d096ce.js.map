{"version":3,"sources":["src/index.js"],"names":["padding","start_x","svg_width","document","querySelector","viewBox","baseVal","width","loadData","data","JSON","parse","console","log","drawChart","api_data","name","createElementNS","setAttribute","classList","add","appendChild","createTextNode","stock_data","path_data","i","push","caption","circle","Math","ceil","length","join"],"mappings":";;;AA6DC,aA7DD,QAAA,gBAEA,IAAIA,EAAU,GACVC,EAAUD,EACVE,EAAYC,SAASC,cAAc,UAAUC,QAAQC,QAAQC,MAEjE,SAASC,IACDC,IAAAA,EAAOC,KAAKC,MAChB,8ZAGKF,OADPG,QAAQC,IAAIJ,GACLA,EAGT,IAAMA,EAAOD,IAEb,SAASM,IAAUC,IAAAA,EAAW,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GACxBC,EAAOb,SAASc,gBAAgB,6BAA8B,QAClED,EAAKE,aAAa,cAAe,UACjCF,EAAKE,aAAa,qBAAsB,UACxCF,EAAKE,aAAa,IAAKhB,EAAY,GACnCc,EAAKE,aAAa,IAAK,GACvBF,EAAKG,UAAUC,IAAI,QACnBJ,EAAKK,YAAYlB,SAASmB,eAAeP,EAAQ,aACjDZ,SAASC,cAAc,UAAUiB,YAAYL,GAEzCO,IAAAA,EAAaR,EAAQ,KACrBS,EAAY,GAEX,IAAA,IAAIC,KAAKF,EAAY,CACxBC,EAAUE,KAAQzB,GAAAA,OAAAA,EAAYsB,MAAAA,OAAAA,EAAWE,GAAX,aAE1BE,IAAAA,EAAUxB,SAASc,gBACrB,6BACA,QAEFU,EAAQT,aAAa,cAAe,UACpCS,EAAQT,aAAa,qBAAsB,UAC3CS,EAAQT,aAAa,IAAKjB,GAC1B0B,EAAQT,aAAa,IAAK,IAC1BS,EAAQR,UAAUC,IAAI,WACtBO,EAAQN,YAAYlB,SAASmB,eAAeC,EAAWE,GAAX,OAC5CtB,SAASC,cAAc,UAAUiB,YAAYM,GAEzCC,IAAAA,EAASzB,SAASc,gBACpB,6BACA,UAEFW,EAAOV,aAAa,KAAMjB,GAC1B2B,EAAOV,aAAa,KAAMK,EAAWE,GAAX,YAC1BG,EAAOV,aAAa,IAAK,GACzBU,EAAOV,aAAa,SAAU,WAC9BU,EAAOV,aAAa,eAAgB,GACpCU,EAAOV,aAAa,OAAQ,QAC5BU,EAAOT,UAAUC,IAAI,SACrBjB,SAASC,cAAc,mBAAmBiB,YAAYO,GACtD3B,GAAW4B,KAAKC,MAAM5B,EAAsB,EAAVF,IAAgBuB,EAAWQ,OAAS,IAExEnB,QAAQC,IAAIW,GACDrB,SAASC,cAAc,SAC7Bc,aAAa,IAAUM,KAAAA,OAAAA,EAAUQ,KAAK,OA7C7ClB,EAAUL","file":"src.90d096ce.js","sourceRoot":"..","sourcesContent":["import \"./styles.css\";\n\nlet padding = 15;\nlet start_x = padding;\nlet svg_width = document.querySelector(\"#chart\").viewBox.baseVal.width;\n\nfunction loadData() {\n  const data = JSON.parse(\n    '{\"stock_name\": \"Apple Inc. (AAPL)\", \"data\": [{\"date\":\"Apr 01\",\"index\":240.91,\"normalized\":27.08},{\"date\":\"Apr 02\",\"index\":244.93,\"normalized\":36.11},{\"date\":\"Apr 03\",\"index\":241.41,\"normalized\":28.20},{\"date\":\"Apr 06\",\"index\":262.47,\"normalized\":75.54},{\"date\":\"Apr 07\",\"index\":259.43,\"normalized\":68.71},{\"date\":\"Apr 08\",\"index\":266.07,\"normalized\":83.64},{\"date\":\"Apr 09\",\"index\":267.99,\"normalized\":87.95}]}'\n  );\n  console.log(data);\n  return data;\n}\n\nconst data = loadData();\ndrawChart(data);\nfunction drawChart(api_data = []) {\n  let name = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n  name.setAttribute(\"text-anchor\", \"middle\");\n  name.setAttribute(\"alignment-baseline\", \"middle\");\n  name.setAttribute(\"x\", svg_width / 2);\n  name.setAttribute(\"y\", 6);\n  name.classList.add(\"name\");\n  name.appendChild(document.createTextNode(api_data[\"stock_name\"]));\n  document.querySelector(\"#chart\").appendChild(name);\n\n  let stock_data = api_data[\"data\"];\n  let path_data = [];\n  // 整理路径数据\n  for (let i in stock_data) {\n    path_data.push(`${start_x}, ${stock_data[i][\"normalized\"]}`);\n\n    let caption = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"text\"\n    );\n    caption.setAttribute(\"text-anchor\", \"middle\");\n    caption.setAttribute(\"alignment-baseline\", \"middle\");\n    caption.setAttribute(\"x\", start_x);\n    caption.setAttribute(\"y\", 96);\n    caption.classList.add(\"caption\");\n    caption.appendChild(document.createTextNode(stock_data[i][\"date\"]));\n    document.querySelector(\"#chart\").appendChild(caption);\n\n    let circle = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"circle\"\n    );\n    circle.setAttribute(\"cx\", start_x);\n    circle.setAttribute(\"cy\", stock_data[i][\"normalized\"]);\n    circle.setAttribute(\"r\", 3);\n    circle.setAttribute(\"stroke\", \"#9f3af0\");\n    circle.setAttribute(\"stroke.width\", 2);\n    circle.setAttribute(\"fill\", \"#fff\");\n    circle.classList.add(\"point\");\n    document.querySelector(\"#path-container\").appendChild(circle);\n    start_x += Math.ceil((svg_width - padding * 2) / (stock_data.length - 1));\n  }\n  console.log(path_data);\n  let line = document.querySelector(\"#line\");\n  line.setAttribute(\"d\", `M ${path_data.join(\" \")}`);\n}\n"]}